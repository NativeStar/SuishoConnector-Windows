<!DOCTYPE html>
<html lang="en" class="mdui-theme-auto">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/notificationFilterSetting.css">
    <link rel="stylesheet" fetchpriority="high" href="../modules/mdui/mdui.css">
    <link rel="stylesheet" href="../modules/mdui/outline_icon.css">
    <link rel="stylesheet" href="../css/select.css">
    <link rel="stylesheet" href="../css/cursor.css">
    <link rel="stylesheet" href="../css/drag.css">
</head>
<script src="../js/notificationFilterSetting.js" type="module"></script>
<script>
    if(!window.electronMainProcess){
        alert("运行平台异常!");
        window.close();
        document.body.innerHTML = "";
    }
</script>
<body>
    <div class="titleBar mdui-theme-auto" id="titleBar">
        Suisho Connector - 通知过滤设置
    </div>
    <mdui-tabs value="textFilter" full-width class="tabBar">
        <mdui-tab value="textFilter">内容过滤</mdui-tab>
        <mdui-tab value="appProfile" id="appProfileTab">应用配置</mdui-tab>
        <mdui-tab-panel slot="panel" value="textFilter" class="tabPanel">
            <mdui-list id="textFilterList">
                <mdui-list-subheader id="textFilterList">关键词列表</mdui-list-subheader>
            </mdui-list>
            <mdui-fab icon="add" id="addTextFilter"></mdui-fab>
            <mdui-fab icon="filter_list" id="textFilterModeChange"></mdui-fab>
            <span id="textFilterTip" style="color: gray;position: absolute;right: 45%; top: 45%;" hidden>空空如也</span>
        </mdui-tab-panel>
        <mdui-tab-panel slot="panel" value="appProfile">
            <div style="width: 100%; height: 100%;background-color: white; position:absolute;z-index: 1;opacity: 0.5;"
                id="appProfileListLoadingProgress">
                <!-- 加载进度条 -->
                <mdui-circular-progress style="margin-top: 26%;margin-left: 47%;"></mdui-circular-progress>
            </div>
            <!-- 应用列表 -->
            <mdui-list id="appProfileAppList">
                <mdui-collapse accordion>
                    <!-- 过滤选项卡 -->
                    <mdui-collapse-item>
                        <mdui-list-item slot="header" icon="apps" style="padding-left: 3.4%;">
                            过滤选项
                            <mdui-icon slot="end-icon" name="keyboard_arrow_down"></mdui-icon>
                        </mdui-list-item>
                        <!-- 展开div -->
                        <div>
                            <!-- 输入框 -->
                            <mdui-text-field variant="outlined" label="输入应用名并回车" clearable
                                id="profileAppFilterInput"></mdui-text-field>
                            <mdui-segmented-button-group selects="single"
                                style="width: 90%;margin-top: 1.3%;margin-left: 5%;" id="appTypeFilterButtonGroup">
                                <mdui-segmented-button value="system">系统</mdui-segmented-button>
                                <mdui-segmented-button value="user">用户</mdui-segmented-button>
                            </mdui-segmented-button-group>
                            <mdui-list-item id="forceRefreshAppListItem" slot="header" icon="refresh" style="padding-left: 3.4%;">
                                刷新列表
                            </mdui-list-item>
                        </div>
                    </mdui-collapse-item>
                </mdui-collapse>
            </mdui-list>
            <!-- 配置面板 -->
            <div id="appProfileControlPanel">
                <span id="appProfilePanelTipText" hidden>选择应用以进行单独配置</span>
                <div style="display: none;" id="appProfileDetailPanel">
                    <mdui-avatar class="mduiAvatarBorder appProfilePanelAvatar" id="controlPanelAppIcon"></mdui-avatar>
                    <span id="controlPanelAppName"></span>
                    <mdui-divider style="margin-top: 1%;"></mdui-divider>
                    <!-- 核心设置 转发 -->
                    <mdui-list-item icon="alt_route" headline="启用通知转发"
                        onclick="document.getElementById('appEnableNotificationSwitch').click()">
                        <mdui-switch slot="end-icon" id="appEnableNotificationSwitch" checked-icon="null"
                            class="notPropagation"></mdui-switch>
                    </mdui-list-item>
                    <!-- profile开关 -->
                    <mdui-list-item icon="fork_right" headline="使用单独配置"
                        onclick="document.getElementById('appProfileSwitch').click()">
                        <mdui-switch slot="end-icon" id="appProfileSwitch" checked-icon="null"
                            class="notPropagation"></mdui-switch>
                    </mdui-list-item>
                    <mdui-divider style="margin-top: 1%;"></mdui-divider>
                    <!-- 上面功能关闭时的提示 -->
                    <div id="panelDisabledTip" hidden style="color: dimgray;text-align: center;"></div>
                    <div id="detailProfilePanel">
                        <!-- 黑白名单启用 -->
                        <mdui-list-item icon="filter_vintage" headline="进行内容过滤"
                            onclick="document.getElementById('profileEnableTextFilterSwitch').click()"
                            description="关闭后将不再对其通知内容使用全局关键词过滤">
                            <mdui-switch slot="end-icon" id="profileEnableTextFilterSwitch" checked-icon="null"
                                class="notPropagation"></mdui-switch>
                        </mdui-list-item>
                        <!-- 双层隐藏 -->
                        <mdui-list-item icon="private_connectivity" headline="深层隐藏"
                            onclick="document.getElementById('deepHiddenSwitch').click()"
                            description="来自该应用的通知需右键点击解锁图标并验证通过后才显示
                            需开启通知转发记录保护才能生效">
                            <mdui-switch slot="end-icon" id="deepHiddenSwitch" checked-icon="null"
                                class="notPropagation"></mdui-switch>
                        </mdui-list-item>
                        <!-- 不保存至历史记录 -->
                        <mdui-list-item icon="history_toggle_off" headline="不保存至推送记录"
                            onclick="document.getElementById('profileDisableRecord').click()"
                            description="来自该应用的通知将不会存储至通知历史记录中">
                            <mdui-switch slot="end-icon" id="profileDisableRecord" checked-icon="null"
                                class="notPropagation"></mdui-switch>
                        </mdui-list-item>
                        <!-- 推送模式 -->
                        <mdui-select id="appProfileModeSelect" label="通知展示模式" icon="adjust" variant="outlined"
                            style="width: 98.5%;margin-top: 2%;user-select: none;" value="allShow">
                            <mdui-menu-item value="all" style="user-select: none;">全部显示</mdui-menu-item>
                            <mdui-menu-item value="nameOnly">仅应用名</mdui-menu-item>
                            <mdui-menu-item value="hide" end-text="不会显示通知标题内容等信息">全部隐藏</mdui-menu-item>
                            <mdui-menu-item value="none" end-text="内容仍会记录在历史通知中">不推送</mdui-menu-item>
                        </mdui-select>
                    </div>
                </div>
            </div>
        </mdui-tab-panel>
    </mdui-tabs>
</body>

</html>