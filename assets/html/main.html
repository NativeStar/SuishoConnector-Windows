<!DOCTYPE html>
<html lang="en" class="mdui-theme-auto">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/select.css">
    <link rel="stylesheet" href="../css/cursor.css">
    <link rel="stylesheet" href="../css/drag.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/main/messageTransmit.css">
    <link rel="stylesheet" href="../css/main/notificationForwardPage.css">
    <link rel="stylesheet" href="../css/main/fileManager.css">
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../modules/mdui/mdui.css">
    <link rel="stylesheet" href="../modules/mdui/outline_icon.css">
    <script src="../js/mainPage.js" type="module"></script>
    <script type="module" src="../modules/sha256.min.js"></script>
    <script type="module" src="../modules/randomthing.min.js"></script>
</head>
<script>
    if(!window.electronMainProcess){
        alert("运行平台异常!");
        window.close();
        document.body.innerHTML = "";
    }
</script>
<body>
    <div class="titleBar mdui-theme-auto" id="titleBar">
        Suisho Connector
    </div>
    <!-- 导航栏 -->
    <mdui-navigation-rail value="home" id="navigationRail">
        <mdui-tooltip content="设置" slot="bottom">
            <mdui-button-icon icon="settings" id="settingPageButton">
            </mdui-button-icon>
        </mdui-tooltip>
        <mdui-navigation-rail-item icon="home" value="home" onclick="changePage('0')">主页</mdui-navigation-rail-item>
        <mdui-navigation-rail-item icon="import_export" value="transmit" onclick="changePage('1')" id="rail_item_transmit">
            数据互传
            <mdui-badge slot="badge" variant="small" id="transmitBadge" style="display: none;"></mdui-badge>
        </mdui-navigation-rail-item>
        <mdui-navigation-rail-item icon="notifications" value="notificationForward" onclick="changePage('2')"
            id="rail_notification_forward_button">
            通知转发
            <mdui-badge slot="badge" variant="small" id="notificationForwardBadge" style="display: none;"></mdui-badge>
        </mdui-navigation-rail-item>
        <mdui-navigation-rail-item icon="folder_open" value="fileManager" onclick="changePage('3')" id="rail_file_manager_button">
            文件浏览
        </mdui-navigation-rail-item>
        <mdui-navigation-rail-item icon="extension" value="extensionManager" onclick="changePage('5')" id="rail_extension_manager_button">
            扩展
        </mdui-navigation-rail-item>
    </mdui-navigation-rail>
    <!-- 功能页面 -->
    <!-- 主页 -->
    <div class="functionsPage" pageId="0">
        <mdui-dropdown placement="left-start" id="stateBarDropdown">
            <mdui-chip slot="trigger" elevated icon="check" end-icon="more_vert" id="stateBar">正常</mdui-chip>
            <mdui-menu id="stateBarMenu">
            </mdui-menu>
        </mdui-dropdown>
        <h3 id="modelNameText">Loading</h3>
        <!-- 投屏video -->
        <!-- <div style="width: 240px;height: 360px;"> -->
            <!-- 提示遮罩 -->
            <!-- <div id="screenProjectionHoverMask" hidden> -->
                <!-- <mdui-icon name="open_in_browser" style="font-size: 64px;"></mdui-icon><br> -->
                <!-- <mdui-icon name="connected_tv" style="font-size: 64px;" id="mediaProjectionMaskIcon"></mdui-icon><br> -->
                <!-- 点击打开投屏操控窗口 -->
                <!-- <div id="screenProjectionHoverMaskText">点击发起投屏连接</div> -->
            <!-- </div> -->
            <!-- <video id="screenProjection" style="width: 240px;height: 360px;cursor: pointer;"></video> -->
        <!-- </div> -->
        <!-- 设备状态 -->
        <mdui-card class="deviceStateCard">
            <!-- 内存使用率 -->
            <mdui-icon name="memory"></mdui-icon>
            <span id="memInfoText">N/A</span>
            <!-- 电池温度 -->
            <mdui-icon name="thermostat"></mdui-icon>
            <span id="batteryTempText">N/A</span>
            <!-- 电量 -->
            <mdui-icon name="battery_full" id="batteryChargingIcon"></mdui-icon>
            <span id="batteryLevelText">N/A</span>
            <!-- 延迟 -->
            <mdui-icon name="wifi"></mdui-icon>
            <span id="connectionLatencyText">N/A</span>
        </mdui-card>
    </div>
    <!-- 互传 -->
    <div class="functionsPage" pageId="1" hidden initHandle="transmitScrollBottom" id="transmitPage">
        <div id="transmit_upload_file_hover_mask" class="drag_hover_mask" hidden>在此释放以上传</div>
        <mdui-card id="transmitMessageFilterCard" variant="elevated">
            <div style="display: flex;flex-direction: row;">
                <mdui-text-field label="内容" variant="outlined" clearable id="transmitMessageFilterInput"></mdui-text-field>
                <!-- 按钮 -->
                <div style="display: flex;flex-direction: row;margin-top: 5%;margin-left: 1%;">
                    <mdui-tooltip content="搜索">
                        <mdui-button-icon variant="tonal" icon="search" id="transmitMessageFilterSearchButton"></mdui-button-icon>
                    </mdui-tooltip>
                    <mdui-tooltip content="区分大小写">
                        <mdui-button-icon icon="keyboard_capslock" id="transmitMessageFilterCapsButton" selectable></mdui-button-icon>
                    </mdui-tooltip>
                    <mdui-tooltip content="关闭">
                        <mdui-button-icon icon="close" id="transmitMessageFilterCloseButton"></mdui-button-icon>
                    </mdui-tooltip>
                </div>
            </div>
        </mdui-card>
        <div id="messageList" class="testMsg" hidden></div>
        <div class="transmitActionBar mdui-theme-auto">
            <!-- 输入区 -->
            <input type="file" id="hiddenUploadFileElement" hidden onchange="onUploadFileSelected(this)">
            <textarea rows="2" cols="50" type="text" placeholder="在此输入文本
使用组合键Ctrl+Enter或点击右侧按钮发送" id="transmit_text_input" spellcheck="false"></textarea>
            <!-- 发送按钮 -->
            <mdui-button variant="tonal" id="transmit_action_send_button">
                <img src="../svg/send.svg" style="margin-top: -39%;margin-left: -8%;">
            </mdui-button>
            <!-- 菜单列表 -->
            <mdui-dropdown>
                <!-- 菜单按钮 -->
                <mdui-button slot="trigger" id="transmit_action_more_button" variant="text">
                    <img src="../svg/open_in_new.svg" style="margin-top: -35%;margin-left: -18%;">
                </mdui-button>
                <mdui-menu>
                    <mdui-menu-item id="menu_transmit_deleteTransmitMessages">清空消息</mdui-menu-item>
                    <mdui-menu-item id="menu_transmit_showFilterCard">搜索</mdui-menu-item>
                    <mdui-menu-item id="menu_transmit_uploadFile">上传文件</mdui-menu-item>
                    <mdui-menu-item id="menu_transmit_openFilesFolder">打开文件夹</mdui-menu-item>
                </mdui-menu>
            </mdui-dropdown>
        </div>
    </div>
    <div class="functionsPage fileManagerPage" pageId="3" id="fileManagerPage" style="display: none;">
        <div id="fileManagerLoadingMark" hidden>
            <mdui-linear-progress style="width: 25%;margin-left: -5%;"></mdui-linear-progress>
        </div>
        <div id="fileManagerDirectoryList">
            <mdui-list>
                <mdui-list-item icon="phone_android" class="fileManagerOpenDirectoryButton"
                    path="">内部存储</mdui-list-item>
                <mdui-list-item icon="download" class="fileManagerOpenDirectoryButton"
                    path="Download">Download目录</mdui-list-item>
                <mdui-collapse>
                    <mdui-collapse-item id="fileManagerDirectoryListStaredDirectoryListCollapse">
                        <mdui-list-item slot="header" icon="star">
                            收藏目录
                            <mdui-icon slot="end-icon" name="keyboard_arrow_down"
                                id="fileManagerDirectoryListStaredDirectoryArrowIcon"></mdui-icon>
                        </mdui-list-item>
                    </mdui-collapse-item>
                </mdui-collapse>
            </mdui-list>
        </div>
        <div id="fileManagerFilesList">
            <!-- 文件过滤 搜索框 -->
            <mdui-card id="fileManagerFileFilterCard" variant="elevated">
                <div style="display: flex;flex-direction: row;">
                    <mdui-text-field label="文件名" variant="outlined" clearable id="fileManagerFileFilterInput"></mdui-text-field>
                    <!-- 按钮 -->
                    <div style="display: flex;flex-direction: row;margin-top: 5%;margin-left: 1%;">
                        <mdui-tooltip content="搜索">
                            <mdui-button-icon variant="tonal" icon="search" id="fileManagerFileFilterSearchButton"></mdui-button-icon>
                        </mdui-tooltip>
                        <mdui-tooltip content="区分大小写">
                            <mdui-button-icon icon="keyboard_capslock" id="fileManagerFileFilterCapsButton" selectable></mdui-button-icon>
                        </mdui-tooltip>
                        <mdui-tooltip content="关闭">
                            <mdui-button-icon icon="close" id="fileManagerFileFilterCloseButton"></mdui-button-icon>
                        </mdui-tooltip>
                    </div>
                </div>
            </mdui-card>
            <span id="fileManagerTipText">选择一个目录开始浏览文件</span>
            <mdui-list id="fileManagerFilesListContent">
            </mdui-list>
            <mdui-dropdown>
                <!-- <mdui-button slot="trigger">open dropdown</mdui-button> -->
                <mdui-fab icon="menu" id="fileManagerMenuFab" slot="trigger"></mdui-fab>
                <mdui-menu>
                    <mdui-menu-item id="fileManagerOpenFileFilterCardMenu">搜索</mdui-menu-item>
                    <mdui-menu-item id="fileManagerMenuAddToStar">加入收藏</mdui-menu-item>
                    <mdui-menu-item id="fileManagerMenuRefresh">刷新</mdui-menu-item>
                </mdui-menu>
            </mdui-dropdown>

        </div>
    </div>
    <!-- 通知转发 -->
    <div class="functionsPage" pageId="2" hidden initHandle="notificationForwardInit">
        <!-- 搜索面板 -->
        <mdui-tooltip content="搜索" placement="bottom">
            <mdui-button variant="text" id="notificationForwardSearchButton" class="notificationProtectDisable">
                <mdui-icon name="search"></mdui-icon>
            </mdui-button>
        </mdui-tooltip>
        <mdui-tooltip content="转发设置" placement="bottom">
            <mdui-button variant="text" id="notificationForwardFilterButton" class="notificationProtectDisable">
                <mdui-icon name="filter_alt"></mdui-icon>
            </mdui-button>
        </mdui-tooltip>
        <mdui-tooltip content="清空" placement="bottom">
            <mdui-button variant="text" id="notificationForwardClearButton" class="notificationProtectDisable">
                <mdui-icon name="delete_outline"></mdui-icon>
            </mdui-button>
        </mdui-tooltip>
        <mdui-tooltip content="解锁" placement="bottom" id="notificationForwardVerifyTip">
            <mdui-button variant="text" id="notificationForwardVerifyButton">
                <mdui-icon name="lock" id="notificationForwardVerifyButtonIcon"></mdui-icon>
            </mdui-button>
        </mdui-tooltip>
        <br>
        <!-- 搜索框 -->
        <mdui-card id="notificationForwardSearchCard" variant="elevated">
            <div style="display: flex;flex-direction: row;">
                <mdui-text-field label="内容" variant="outlined" clearable id="notificationForwardFilterInput"></mdui-text-field>
                <!-- 按钮 -->
                <div style="display: flex;flex-direction: row;margin-top: 5%;margin-left: 1%;">
                    <mdui-tooltip content="搜索">
                        <mdui-button-icon variant="tonal" icon="search" id="notificationForwardFilterSearchButton"></mdui-button-icon>
                    </mdui-tooltip>
                    <mdui-tooltip content="区分大小写">
                        <mdui-button-icon icon="keyboard_capslock" id="notificationForwardFilterCapsButton" selectable></mdui-button-icon>
                    </mdui-tooltip>
                    <mdui-tooltip content="搜索包括应用名">
                        <mdui-button-icon icon="apps" id="notificationForwardFilterIncludeApplicationNameButton" selectable></mdui-button-icon>
                    </mdui-tooltip>
                    <mdui-tooltip content="关闭">
                        <mdui-button-icon icon="close" id="notificationForwardFilterCloseButton"></mdui-button-icon>
                    </mdui-tooltip>
                </div>
            </div>
        </mdui-card>
        <div>
            <!-- 开启保护时遮罩 -->
            <div id="notificationProtectMask" hidden class="mdui-theme-auto">
                通知记录已锁定
                <br>
                点击
                <mdui-icon name="lock_open"></mdui-icon>
                按钮验证后可查看
            </div>
            <!-- 通知列表 -->
            <div id="forwardedNotificationsList" class="forwardedNotificationsListLong"></div>
        </div>
    </div>
    <div class="functionsPage settingsPage" pageId="4" hidden>
        <mdui-list>
            <mdui-list-subheader>全局</mdui-list-subheader>
            <mdui-list-item icon="link" description="Loading" id="boundDevice">
                绑定/解绑设备
            </mdui-list-item>
            <mdui-list-item icon="monitor_heart" description="降低设备掉线时反应时间 可能影响手机耗电量">
                掉线轮询间隔
                <mdui-select slot="end-icon" class="notPropagation settingSelect" config="heartBeatDelay"
                    config-type="global" id="heartBeatDelaySelect">
                    <mdui-menu-item value="VERY_SLOW" style="user-select: none;"
                        class="settingSelectFix">极长</mdui-menu-item>
                    <mdui-menu-item value="SLOW" class="settingSelectFix">长</mdui-menu-item>
                    <mdui-menu-item value="MEDIUM" class="settingSelectFix">中等</mdui-menu-item>
                    <mdui-menu-item value="HIGH" class="settingSelectFix">短</mdui-menu-item>
                    <mdui-menu-item value="VERY_HIGH" class="settingSelectFix">极短</mdui-menu-item>
                </mdui-select>
            </mdui-list-item>
            <mdui-list-item icon="library_books" description="方便调试 可能对性能有微弱影响">
                日志输出等级
                <mdui-select slot="end-icon" class="notPropagation settingSelect" config="logLevel" config-type="global"
                    id="logLevelSelect">
                    <mdui-menu-item value="NONE" class="settingSelectFix">关闭(NONE)</mdui-menu-item>
                    <mdui-menu-item value="ERROR" class="settingSelectFix">异常(ERROR)</mdui-menu-item>
                    <mdui-menu-item value="WARN" class="settingSelectFix">警告(WARN)</mdui-menu-item>
                    <mdui-menu-item value="INFO" class="settingSelectFix">信息(INFO)</mdui-menu-item>
                    <mdui-menu-item value="DEBUG" class="settingSelectFix">调试(DEBUG)</mdui-menu-item>
                </mdui-select>
            </mdui-list-item>
            <mdui-list-subheader>通知转发</mdui-list-subheader>
            <mdui-list-item icon="fork_right" class="settingListItem">
                启用通知转发
                <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation settingSwitch"
                    config="enableNotificationForward" config-type="client"></mdui-switch>
            </mdui-list-item>
            <mdui-list-item icon="close_fullscreen" class="settingListItem" description="开启后即使计算机锁屏也会弹出通知(一般用不上)">
                计算机锁屏后继续推送转发的通知
                <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation settingSwitch"
                    config="pushNotificationOnLockedScreen" config-type="client"></mdui-switch>
            </mdui-list-item>
            <mdui-list-item icon="fullscreen" class="settingListItem" description="全屏视频 游戏 PPT等">
                全屏时推送通知
                <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation settingSwitch"
                    config="pushNotificationOnFullScreen" config-type="client"></mdui-switch>
            </mdui-list-item>
            <mdui-list-item icon="history" class="settingListItem">
                使用通知历史记录
                <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation settingSwitch"
                    config="enableNotificationLog" config-type="client"></mdui-switch>
            </mdui-list-item>
            <mdui-list-item icon="notifications_active">
                默认通知展示方式
                <mdui-select slot="end-icon" class="notPropagation settingSelect" config="defaultNotificationShowMode"
                    config-type="client">
                    <mdui-menu-item value="all" class="settingSelectFix">全部显示</mdui-menu-item>
                    <mdui-menu-item value="nameOnly" class="settingSelectFix">仅应用名</mdui-menu-item>
                    <mdui-menu-item value="hide" class="settingSelectFix">全部隐藏</mdui-menu-item>
                    <mdui-menu-item value="none" class="settingSelectFix">不推送</mdui-menu-item>
                </mdui-select>
            </mdui-list-item>
            <mdui-list-subheader>隐私</mdui-list-subheader>
            <mdui-list-item icon="key">
                验证方式
                <mdui-select slot="end-icon" placement="top" class="notPropagation" id="protectMethodSelect">
                    <mdui-menu-item value="none" class="settingSelectFix">关闭</mdui-menu-item>
                    <mdui-menu-item value="oauth" class="settingSelectFix">Windows Hello</mdui-menu-item>
                    <mdui-menu-item value="password" class="settingSelectFix">密码</mdui-menu-item>
                </mdui-select>
            </mdui-list-item>
            <mdui-list-item icon="doorbell" class="settingListItem">
                通知转发记录保护
                <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation settingSwitch"
                    config="protectNotificationForwardPage" config-type="client"></mdui-switch>
            </mdui-list-item>
            <mdui-list-item icon="password" id="changePasswordItem">更改密码</mdui-list-item>
            </mdui-list-item>
            <mdui-list-item icon="shield" class="settingListItem" description="阻止截图录屏获取软件内容保护隐私 适用于直播或屏幕共享等">
                截录屏保护
                <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation settingSwitch"
                    config="enableContentProtection" config-type="global"></mdui-switch>
            </mdui-list-item>
            <mdui-list-subheader>辅助功能</mdui-list-subheader>
            <mdui-list-item icon="battery_4_bar" class="settingListItem" description="手机电量充满时发出通知">
                电池满电提醒
                <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation settingSwitch"
                    config="enableBatteryFullNotification" config-type="client"></mdui-switch>
            </mdui-list-item>
            <mdui-list-subheader>杂项</mdui-list-subheader>
            <mdui-list-item icon="info" onclick="document.getElementById('aboutDialog').open=true">关于</mdui-list-item>
        </mdui-list>
    </div>
    <div class="functionsPage fileManagerPage" pageId="5" hidden>
        <!-- 目前就这一个功能 先不写切换页面 -->
        <div id="extensionSettingList">
            <mdui-list>
                <mdui-list-item icon="notifications_active">通知处理</mdui-list-item>
            </mdui-list>
        </div>
        <div id="extension_notification_processor_setting" class="extensionDetailSettingsDiv">
            <mdui-list>
                <mdui-list-item icon="settings_ethernet" class="extensionSwitchItemElement">
                    启用该功能
                    <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation" config="extension_notificationProcessorEnable" id="extension_notification_processor_enable"></mdui-switch>
                </mdui-list-item>
                <small style="color: gray;">将接收到的通知内容转发到指定端口 可由连接的程序进行处理</small>
                <br>
                <small style="color: firebrick;">请务必确保负责接收程序的来源可信 否则可能导致隐私泄露或其他损失!</small>
                <br>
                <small style="color: gray;">当前状态:</small>
                <small style="color: gray;" id="extension_notificationProcessorStateText">未开启</small>
                <mdui-list-item icon="settings_ethernet">
                    端口号
                    <mdui-text-field slot="end-icon" label="开启服务端的端口号" type="number" maxlength="5" id="extension_notification_processor_port_input"></mdui-text-field>
                </mdui-list-item>
                <mdui-list-item icon="playlist_remove" class="extensionSwitchItemElement" description="允许插件在一定时间内取消通知显示 开启后正常通知显示可能会有短暂延迟">
                    允许插件取消通知
                    <mdui-switch slot="end-icon" checked-icon="null" class="notPropagation" config="extension_notificationProcessorAllowCancelNotificationShow" id="extension_notification_processor_allow_cancel_notification_show"></mdui-switch>
                </mdui-list-item>
                <mdui-list-item icon="key" description="出于安全考虑 连接需要使用每次启动时生成的密钥" id="extension_notificationProcessorCopyKey">复制鉴权密钥</mdui-list-item>
                <mdui-list-item icon="close" id="extension_notificationProcessorShutdownButton">关闭功能</mdui-list-item>
                <mdui-list-item icon="save" id="extension_notificationProcessorSaveButton">保存</mdui-list-item>
                <mdui-list-item icon="code" target="_blank" href="javascript:void(0)">插件开发文档</mdui-list-item>
            </mdui-list>
        </div>
    </div>
    <mdui-dialog id="aboutDialog" close-on-overlay-click="true" close-on-esc="true">
        <span style="color: gray;">感谢您的使用</span><br>
        <a href="javascript:void(0);" target="_blank" style="color: gray;">Github</a><br>
        <a href="javascript:void(0);" target="_blank" style="color: gray;">作者主页</a>
    </mdui-dialog>
</body>

</html>